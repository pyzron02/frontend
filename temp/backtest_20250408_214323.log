21:43:26 - backtester - INFO - Logging system initialized with default level: INFO
21:43:26 - backtester - INFO - Log directory: /home/pyzron02/trading-strategy-backtester/logs
21:43:26 - backtester - INFO - Console output: True
21:43:26 - backtester - INFO - File output: True
21:43:26 - backtester - INFO - Async logging: True
21:43:26 - backtester - INFO - Async logging thread started
Registered strategy: SimpleStock (v1.0.1)
Registered strategy: MultiPosition (v1.0.1)
Registered strategy: AuctionMarket (v1.0.1)
Registered strategy: MACrossover (v1.0.0)
Starting backtest for strategy: MultiPosition
Tickers: ['TSLA', 'PLTR', 'NVDA']
Date range: 2020-01-01 to 2024-12-31
Output directory: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323
Registered strategy: SimpleStock (v1.0.1)
Registered strategy: MultiPosition (v1.0.1)
Registered strategy: AuctionMarket (v1.0.1)
Registered strategy: MACrossover (v1.0.0)
Found strategy class: MultiPositionStrategy
Running with fixed parameters
Parameters formatted for optimization: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/parameters.json
Running backtest | 21:43:27 - backtester - INFO - Set log level for all components to INFO
21:43:27 - backtester.workflow - INFO - Starting complete workflow for MultiPosition
21:43:27 - backtester.workflow - INFO - Tickers: ['TSLA', 'PLTR', 'NVDA']
21:43:27 - backtester.workflow - INFO - Period: 2020-01-01 to 2024-12-31
21:43:27 - backtester.workflow - INFO - Output directory: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323
21:43:27 - backtester.workflow - INFO - Created parameter grid: {'parameters': {'max_positions': [5], 'position_size': [50], 'sma_period': [20]}}
21:43:27 - backtester.workflow - WARNING - Could not copy parameter file: '/home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/parameters.json' and '/home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/parameters.json' are the same file
21:43:27 - backtester.workflow - INFO - In-sample period: 2020-01-01 to 2023-07-02
21:43:27 - backtester.workflow - INFO - Out-of-sample period: 2023-07-03 to 2024-12-31
21:43:27 - backtester.workflow - INFO - Starting in-sample optimization...
21:43:27 - backtester.workflow - INFO - Using 7 CPU cores for parallel optimization
Testing parameters:   0%|          | 0/3 [00:00<?, ?it/s]Testing parameters:  33%|███▎      | 1/3 [00:00<00:00,  6.19it/s]Testing parameters: 100%|██████████| 3/3 [00:00<00:00, 15.48it/s]
21:43:27 - backtester.workflow - INFO - Optimization process output captured in /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/logs/optimization_output.log
21:43:27 - backtester.workflow - INFO - Best parameters found: {}
21:43:27 - backtester.workflow - WARNING - No best parameters found. Using default parameter values.
21:43:27 - backtester.workflow - WARNING - No default parameters found. Using fallback values.
21:43:27 - backtester.workflow - INFO - Using default parameters: {'position_size': 100}
21:43:27 - backtester.workflow - INFO - Created parameters.txt in main output directory
21:43:27 - backtester.workflow - INFO - Starting walk-forward testing...
21:43:30 - backtester.workflow - INFO - Walk-forward process output captured in /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/logs/walkforward_output.log
21:43:30 - backtester.workflow - INFO - Walk-forward testing completed
21:43:30 - backtester.workflow - INFO - Starting Trade-Based Monte Carlo testing with 100 simulations using 7 workers...
21:43:30 - backtester.workflow - INFO - Date ranges: In-sample: 2020-01-01 to 2023-12-31, Out-of-sample: 2024-01-01 to 2024-12-31
21:43:30 - backtester.workflow - INFO - Using 7 CPU cores for Monte Carlo simulations
21:43:30 - backtester.workflow - INFO - Using Trade-Based Monte Carlo implementation
21:43:30 - backtester.workflow - INFO - Running 100 simulations with resampled trade returns
21:43:30 - backtester.workflow - INFO - Using 7 CPU cores for parallel processing
21:43:30 - backtester.workflow - INFO - Initialized Trade-Based Monte Carlo Test for MultiPosition strategy
21:43:30 - backtester.workflow - INFO - Parameters: {'position_size': 100}
21:43:30 - backtester.workflow - INFO - Tickers: ['TSLA', 'PLTR', 'NVDA']
21:43:30 - backtester.workflow - INFO - Number of simulations: 100
21:43:30 - backtester.workflow - INFO - Using 7 CPU cores for parallel processing
21:43:30 - backtester.workflow - INFO - Keep permuted data: True (This will save permuted data files)
21:43:30 - backtester.workflow - INFO - Permuted data will be saved in: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/monte_carlo/permuted_data
Creating permuted datasets:   0%|          | 0/100 [00:00<?, ?dataset/s]Creating permuted datasets:   1%|          | 1/100 [00:00<00:10,  9.09dataset/s]Creating permuted datasets:   3%|▎         | 3/100 [00:00<00:09, 10.76dataset/s]Creating permuted datasets:   5%|▌         | 5/100 [00:00<00:08, 10.83dataset/s]Creating permuted datasets:   7%|▋         | 7/100 [00:00<00:08, 10.99dataset/s]Creating permuted datasets:   9%|▉         | 9/100 [00:00<00:08, 10.28dataset/s]Creating permuted datasets:  11%|█         | 11/100 [00:01<00:08, 10.05dataset/s]Creating permuted datasets:  13%|█▎        | 13/100 [00:01<00:09,  9.66dataset/s]Creating permuted datasets:  15%|█▌        | 15/100 [00:01<00:08,  9.98dataset/s]Creating permuted datasets:  17%|█▋        | 17/100 [00:01<00:08,  9.99dataset/s]Creating permuted datasets:  19%|█▉        | 19/100 [00:01<00:07, 10.13dataset/s]Creating permuted datasets:  21%|██        | 21/100 [00:02<00:07, 10.20dataset/s]Creating permuted datasets:  23%|██▎       | 23/100 [00:02<00:08,  9.43dataset/s]Creating permuted datasets:  24%|██▍       | 24/100 [00:02<00:07,  9.51dataset/s]Creating permuted datasets:  25%|██▌       | 25/100 [00:02<00:07,  9.60dataset/s]Creating permuted datasets:  26%|██▌       | 26/100 [00:02<00:07,  9.55dataset/s]Creating permuted datasets:  27%|██▋       | 27/100 [00:02<00:07,  9.35dataset/s]Creating permuted datasets:  28%|██▊       | 28/100 [00:02<00:07,  9.46dataset/s]Creating permuted datasets:  30%|███       | 30/100 [00:03<00:07,  9.79dataset/s]Creating permuted datasets:  32%|███▏      | 32/100 [00:03<00:06, 10.42dataset/s]Creating permuted datasets:  34%|███▍      | 34/100 [00:03<00:06, 10.56dataset/s]Creating permuted datasets:  36%|███▌      | 36/100 [00:03<00:06, 10.37dataset/s]Creating permuted datasets:  38%|███▊      | 38/100 [00:03<00:05, 10.40dataset/s]Creating permuted datasets:  40%|████      | 40/100 [00:03<00:05, 10.29dataset/s]Creating permuted datasets:  42%|████▏     | 42/100 [00:04<00:05, 10.65dataset/s]Creating permuted datasets:  44%|████▍     | 44/100 [00:04<00:05, 10.39dataset/s]Creating permuted datasets:  46%|████▌     | 46/100 [00:04<00:05,  9.98dataset/s]Creating permuted datasets:  48%|████▊     | 48/100 [00:05<00:08,  6.15dataset/s]Creating permuted datasets:  50%|█████     | 50/100 [00:05<00:07,  7.11dataset/s]Creating permuted datasets:  52%|█████▏    | 52/100 [00:05<00:06,  7.93dataset/s]Creating permuted datasets:  54%|█████▍    | 54/100 [00:05<00:05,  8.70dataset/s]Creating permuted datasets:  56%|█████▌    | 56/100 [00:05<00:04,  9.39dataset/s]Creating permuted datasets:  58%|█████▊    | 58/100 [00:06<00:04, 10.02dataset/s]Creating permuted datasets:  60%|██████    | 60/100 [00:06<00:03, 10.40dataset/s]Creating permuted datasets:  62%|██████▏   | 62/100 [00:06<00:03, 10.26dataset/s]Creating permuted datasets:  64%|██████▍   | 64/100 [00:06<00:03, 10.02dataset/s]Creating permuted datasets:  66%|██████▌   | 66/100 [00:06<00:03,  9.75dataset/s]Creating permuted datasets:  68%|██████▊   | 68/100 [00:07<00:03, 10.20dataset/s]Creating permuted datasets:  70%|███████   | 70/100 [00:07<00:02, 10.51dataset/s]Creating permuted datasets:  72%|███████▏  | 72/100 [00:07<00:02, 10.84dataset/s]Creating permuted datasets:  74%|███████▍  | 74/100 [00:07<00:02, 10.93dataset/s]Creating permuted datasets:  76%|███████▌  | 76/100 [00:07<00:02, 10.54dataset/s]Creating permuted datasets:  78%|███████▊  | 78/100 [00:07<00:02, 10.52dataset/s]Creating permuted datasets:  80%|████████  | 80/100 [00:08<00:01, 10.06dataset/s]Creating permuted datasets:  82%|████████▏ | 82/100 [00:08<00:01,  9.63dataset/s]Creating permuted datasets:  83%|████████▎ | 83/100 [00:08<00:01,  9.59dataset/s]Creating permuted datasets:  85%|████████▌ | 85/100 [00:08<00:01,  9.93dataset/s]Creating permuted datasets:  87%|████████▋ | 87/100 [00:08<00:01, 10.07dataset/s]Creating permuted datasets:  89%|████████▉ | 89/100 [00:09<00:01,  9.10dataset/s]Creating permuted datasets:  90%|█████████ | 90/100 [00:09<00:01,  9.00dataset/s]Creating permuted datasets:  91%|█████████ | 91/100 [00:09<00:01,  8.52dataset/s]Creating permuted datasets:  92%|█████████▏| 92/100 [00:09<00:00,  8.48dataset/s]Creating permuted datasets:  93%|█████████▎| 93/100 [00:09<00:00,  8.80dataset/s]Creating permuted datasets:  94%|█████████▍| 94/100 [00:09<00:00,  8.97dataset/s]Creating permuted datasets:  95%|█████████▌| 95/100 [00:09<00:00,  8.84dataset/s]Creating permuted datasets:  96%|█████████▌| 96/100 [00:09<00:00,  9.10dataset/s]Creating permuted datasets:  98%|█████████▊| 98/100 [00:10<00:00,  9.81dataset/s]Creating permuted datasets: 100%|██████████| 100/100 [00:10<00:00, 10.28dataset/s]Creating permuted datasets: 100%|██████████| 100/100 [00:10<00:00,  9.67dataset/s]
Running backtests:   0%|          | 0/100 [00:00<?, ?backtest/s]Running backtests:   1%|          | 1/100 [00:00<01:34,  1.04backtest/s]Running backtests:   7%|▋         | 7/100 [00:01<00:12,  7.60backtest/s]Running backtests:   9%|▉         | 9/100 [00:01<00:15,  5.92backtest/s]Running backtests:  13%|█▎        | 13/100 [00:01<00:10,  8.49backtest/s]Running backtests:  15%|█▌        | 15/100 [00:02<00:12,  6.69backtest/s]Running backtests:  17%|█▋        | 17/100 [00:02<00:10,  7.98backtest/s]Running backtests:  20%|██        | 20/100 [00:02<00:07, 10.43backtest/s]Running backtests:  22%|██▏       | 22/100 [00:03<00:11,  6.52backtest/s]Running backtests:  27%|██▋       | 27/100 [00:03<00:06, 10.82backtest/s]Running backtests:  30%|███       | 30/100 [00:04<00:09,  7.40backtest/s]Running backtests:  35%|███▌      | 35/100 [00:04<00:06,  9.61backtest/s]Running backtests:  37%|███▋      | 37/100 [00:04<00:07,  8.15backtest/s]Running backtests:  40%|████      | 40/100 [00:05<00:06,  9.58backtest/s]Running backtests:  42%|████▏     | 42/100 [00:05<00:05, 10.68backtest/s]Running backtests:  44%|████▍     | 44/100 [00:05<00:06,  8.67backtest/s]Running backtests:  48%|████▊     | 48/100 [00:05<00:05,  9.62backtest/s]Running backtests:  50%|█████     | 50/100 [00:06<00:05,  8.73backtest/s]Running backtests:  52%|█████▏    | 52/100 [00:06<00:05,  8.46backtest/s]Running backtests:  53%|█████▎    | 53/100 [00:06<00:05,  8.39backtest/s]Running backtests:  56%|█████▌    | 56/100 [00:06<00:05,  8.28backtest/s]Running backtests:  58%|█████▊    | 58/100 [00:07<00:05,  7.53backtest/s]Running backtests:  61%|██████    | 61/100 [00:07<00:03, 10.00backtest/s]Running backtests:  63%|██████▎   | 63/100 [00:07<00:04,  9.00backtest/s]Running backtests:  65%|██████▌   | 65/100 [00:07<00:04,  7.94backtest/s]Running backtests:  68%|██████▊   | 68/100 [00:08<00:04,  7.09backtest/s]Running backtests:  71%|███████   | 71/100 [00:08<00:03,  8.24backtest/s]Running backtests:  72%|███████▏  | 72/100 [00:08<00:03,  7.27backtest/s]Running backtests:  76%|███████▌  | 76/100 [00:09<00:02,  9.69backtest/s]Running backtests:  78%|███████▊  | 78/100 [00:09<00:02,  9.05backtest/s]Running backtests:  79%|███████▉  | 79/100 [00:09<00:02,  8.36backtest/s]Running backtests:  83%|████████▎ | 83/100 [00:10<00:02,  8.19backtest/s]Running backtests:  85%|████████▌ | 85/100 [00:10<00:01,  8.54backtest/s]Running backtests:  86%|████████▌ | 86/100 [00:10<00:02,  6.43backtest/s]Running backtests:  90%|█████████ | 90/100 [00:10<00:01,  8.79backtest/s]Running backtests:  92%|█████████▏| 92/100 [00:11<00:01,  7.25backtest/s]Running backtests:  93%|█████████▎| 93/100 [00:12<00:01,  4.40backtest/s]Running backtests:  96%|█████████▌| 96/100 [00:12<00:00,  5.45backtest/s]Running backtests: 100%|██████████| 100/100 [00:12<00:00,  8.00backtest/s]
Processing results:   0%|          | 0/100 [00:00<?, ?simulation/s]Processing results:  25%|██▌       | 25/100 [00:00<00:00, 246.12simulation/s]Processing results:  56%|█████▌    | 56/100 [00:00<00:00, 280.75simulation/s]Processing results:  86%|████████▌ | 86/100 [00:00<00:00, 287.22simulation/s]Processing results: 100%|██████████| 100/100 [00:00<00:00, 270.55simulation/s]
21:44:08 - backtester.workflow - INFO - Trade logs summary saved to: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/monte_carlo/trade_log_summary.json
21:44:08 - backtester.workflow - INFO - Permuted price comparison plots saved to: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/monte_carlo/visualizations
21:44:08 - backtester.workflow - INFO - Monte Carlo metric: total_return - Original: 12.27002892843634, Mean: 17.103420754607917, p-value: 0.4
21:44:08 - backtester.workflow - INFO - Monte Carlo metric: sharpe_ratio - Original: 0.7511859931051349, Mean: 0.7110923853950234, p-value: 0.45
21:44:08 - backtester.workflow - INFO - Monte Carlo metric: max_drawdown - Original: 14.579531393363233, Mean: 12.228913330986023, p-value: 0.7
21:44:08 - backtester.workflow - INFO - Monte Carlo metric: win_rate - Original: 0.13559322033898305, Mean: 0.2256215725976125, p-value: 0.97
21:44:08 - backtester.workflow - INFO - Monte Carlo metric: profit_factor - Original: 1.6900268085311243, Mean: 5.292094844662379, p-value: 0.44
21:44:08 - backtester.workflow - INFO - Monte Carlo process output captured in /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/logs/montecarlo_output.log
21:44:08 - backtester.workflow - INFO - Complete workflow finished. Results saved to /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323
21:44:08 - backtester.workflow - INFO - 
Workflow completed successfully for MultiPosition
21:44:08 - backtester.workflow - INFO - Best parameters: {'position_size': 100}
21:44:08 - backtester.workflow - INFO - Results saved to /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323
Starting unified workflow...
Using parameter file: /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/parameters.json
Parameter file exists. Contents:
{
    "parameters": {
        "max_positions": [
            5
        ],
        "position_size": [
            50
        ],
        "sma_period": [
            20
        ]
    }
}
Warning: Strategy 'MultiPosition' not found in parameter definitions
Backtest completed!      
Backtest completed! Results saved to /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/complete_results.json

Summary:

Error running backtest: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
Traceback:
Traceback (most recent call last):
  File "/home/pyzron02/frontend/run_backtest.py", line 252, in main
    if not metrics_found or not ui_results['metrics']:
  File "/home/pyzron02/.local/lib/python3.10/site-packages/pandas/core/generic.py", line 1466, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().


Debugging information:
Python version: 3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0]
Current directory: /home/pyzron02/frontend
PYTHONPATH: /home/pyzron02/trading-strategy-backtester:/home/pyzron02/trading-strategy-backtester/src
sys.path: ['/home/pyzron02/frontend', '/home/pyzron02/trading-strategy-backtester', '/home/pyzron02/trading-strategy-backtester/src', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '/home/pyzron02/.local/lib/python3.10/site-packages', '/usr/local/lib/python3.10/dist-packages', '/usr/lib/python3/dist-packages', '/home/pyzron02/trading-strategy-backtester', '/home/pyzron02/trading-strategy-backtester/src', '/home/pyzron02/trading-strategy-backtester/src/engine', '/home/pyzron02/trading-strategy-backtester', '/home/pyzron02/trading-strategy-backtester/src/runners', '/home/pyzron02/trading-strategy-backtester/src/strategies']
Error details saved to /home/pyzron02/trading-strategy-backtester/output/MultiPosition_20250408_214323/error.txt
